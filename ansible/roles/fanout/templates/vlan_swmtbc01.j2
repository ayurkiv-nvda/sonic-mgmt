{% set eth_ports = ['ERR', '1/9/1', '1/9/2', '1/9/3', '1/9/4', '1/11/1', '1/11/2', '1/11/3', '1/11/4', '1/13/1', '1/13/2', '1/13/3', '1/13/4', '1/15/1', '1/15/2', '1/15/3', '1/15/4', '1/17/1', '1/17/2', '1/17/3', '1/17/4', '1/19/1', '1/19/2', '1/19/3', '1/19/4', '1/21/1', '1/21/2', '1/21/3', '1/21/4', '1/23/1', '1/23/2', '1/23/3', '1/23/4', '1/32'] %}
{% set uplink_port_id = 33 %}
{% set of_ports = [-1, 109, 110, 111, 112, 105, 106, 107, 108, 101, 102, 103, 104, 97, 98, 99, 100, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 95] -%}

config t
{% for i in range(1,eth_ports|length-1) %}
{% set vlanid = (100+i)|string %}
interface ethernet {{eth_ports[i]}} switchport mode dot1q-tunnel
interface ethernet {{eth_ports[i]}} switchport access vlan {{ vlanid }}
{% endfor %}

{% for i in range(1,eth_ports|length-1) %}
{% set vlanid = (100+i)|string %}
openflow del-flows {{ 160 + i }}
openflow add-flows {{ 160 + i }} table=0,priority=101,dl_type=0x0806,in_port={{ of_ports[i] }},actions=output:{{ of_ports[uplink_port_id] }}
{% endfor %}
