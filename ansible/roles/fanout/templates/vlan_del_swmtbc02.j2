{% set eth_ports = ['ERR', '1/1/1', '1/1/2', '1/1/3', '1/1/4', '1/3/1', '1/3/2', '1/3/3', '1/3/4', '1/5/1', '1/5/2', '1/5/3', '1/5/4', '1/7/1', '1/7/2', '1/7/3', '1/7/4', '1/9/1', '1/9/2', '1/9/3', '1/9/4', '1/11/1', '1/11/2', '1/11/3', '1/11/4', '1/13/1', '1/13/2', '1/13/3', '1/13/4', '1/15/1', '1/15/2', '1/15/3', '1/15/4', '1/32'] %}
{% set uplink_port_id = 33 %}
{% set of_ports = [-1, 125, 126, 127, 128, 121, 122, 123, 124, 117, 118, 119, 120, 113, 114, 115, 116, 109, 110, 111, 112, 105, 106, 107, 108, 101, 102, 103, 104, 97, 98, 99, 100, 95] -%}

config t
{% for i in range(1,eth_ports|length-1) %}
{% set vlanid = (100+i)|string %}
interface ethernet {{eth_ports[i]}} switchport mode access
interface ethernet {{eth_ports[i]}} switchport access vlan {{ vlanid }}
{% endfor %}

{% for i in range(1,eth_ports|length-1) %}
{% set vlanid = (100+i)|string %}
openflow del-flows {{ 160 + i }}
openflow add-flows {{ 160 + i }} table=0,priority=101,dl_type=0x0806,in_port={{ of_ports[i] }},actions=mod_vlan_vid:{{ vlanid }},output:{{ of_ports[uplink_port_id] }}
{% endfor %}
