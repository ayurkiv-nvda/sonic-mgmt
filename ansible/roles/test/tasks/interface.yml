- name: Get interface facts
  interface_facts:

- name: Verify interfaces are up correctly
  assert: { that: "'{{ ansible_interface_facts[item]['active'] }}' == 'True'" }
  with_items: "{{ minigraph_ports }}"
# Hack for 31 port connected
  when: item != "Ethernet124"

- name: Verify port channel interfaces are up correctly
  assert: { that: "'{{ ansible_interface_facts[item]['active'] }}' == 'True'" }
  with_items: "{{ minigraph_portchannels.keys() }}"

- name: Verify VLAN interfaces are up correctly
  assert: { that: "'{{ ansible_interface_facts[item]['active'] }}' == 'True'" }
  with_items: "{{ minigraph_vlans.keys() }}"
